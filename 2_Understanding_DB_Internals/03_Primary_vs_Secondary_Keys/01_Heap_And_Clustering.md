# ğŸ“¦ Heap and Clustering Basics

> Heap ante enti? Clustering ante enti? Simple ga artham cheskondaam!

---

## ğŸ¯ Heap - Default Behavior

**Heap** = Data store ayye default area. ORDER ledu!

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                         â”‚
â”‚   ğŸ  Heap = Messy room                                  â”‚
â”‚                                                         â”‚
â”‚   Data insert chesthe, next available space lo padtundi â”‚
â”‚   No sorting, no order!                                â”‚
â”‚                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“¦ Heap Example

```
INSERT order: 7, 1, 9, 2
(We insert ID 7 first, then 1, then 9, then 2)

Heap Storage:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                         â”‚
â”‚   Page 1:                                               â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”                            â”‚
â”‚   â”‚  7  â”‚  1  â”‚  9  â”‚  2  â”‚  â† INSERT order lo store   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”˜                            â”‚
â”‚                                                         â”‚
â”‚   âš ï¸ NOTICE: 7 first ayindi because 7 first insert     â”‚
â”‚              Value order (1,2,7,9) lo KADU!            â”‚
â”‚                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”¢ No Primary Key = Heap Only

```sql
-- This table has NO primary key
CREATE TABLE employees (
    id INT,          -- Just a regular column
    name VARCHAR(50),
    salary INT
);
```

**Result:**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                         â”‚
â”‚   Data goes wherever there's space!                     â”‚
â”‚   No guarantee of order                                 â”‚
â”‚   This is HEAP behavior                                â”‚
â”‚                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¯ Clustering Ante Enti?

**Clustering** = Data ni ORDER lo arrange cheyyadam!

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                         â”‚
â”‚   WITHOUT Clustering:        WITH Clustering:           â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”                    â”Œâ”€â”€â”€â”€â”€â”                   â”‚
â”‚   â”‚  7  â”‚                    â”‚  1  â”‚  â† Sorted!        â”‚
â”‚   â”œâ”€â”€â”€â”€â”€â”¤                    â”œâ”€â”€â”€â”€â”€â”¤                   â”‚
â”‚   â”‚  1  â”‚    â”€â”€â”€â”€â”€â”€â”€â–º        â”‚  2  â”‚  â† Sorted!        â”‚
â”‚   â”œâ”€â”€â”€â”€â”€â”¤                    â”œâ”€â”€â”€â”€â”€â”¤                   â”‚
â”‚   â”‚  9  â”‚                    â”‚  7  â”‚  â† Sorted!        â”‚
â”‚   â”œâ”€â”€â”€â”€â”€â”¤                    â”œâ”€â”€â”€â”€â”€â”¤                   â”‚
â”‚   â”‚  2  â”‚                    â”‚  9  â”‚  â† Sorted!        â”‚
â”‚   â””â”€â”€â”€â”€â”€â”˜                    â””â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚   Insert order               Value order               â”‚
â”‚                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”‘ Primary Key = Clustering

```sql
-- This table HAS primary key
CREATE TABLE employees (
    id INT PRIMARY KEY,    -- PRIMARY KEY!
    name VARCHAR(50),
    salary INT
);
```

**Result:**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                         â”‚
â”‚   INSERT 7, then 1, then 9, then 2                     â”‚
â”‚                                                         â”‚
â”‚   Storage (with Primary Key):                           â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”                            â”‚
â”‚   â”‚  1  â”‚  2  â”‚  7  â”‚  9  â”‚  â† SORTED by Primary Key!  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”˜                            â”‚
â”‚                                                         â”‚
â”‚   Primary Key = Clustering = Sorting!                  â”‚
â”‚                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## âš ï¸ Clustering Cost

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                         â”‚
â”‚   INSERT id=5 into: [1, 2, 7, 9]                       â”‚
â”‚                                                         â”‚
â”‚   Step 1: Find position (between 2 and 7)              â”‚
â”‚   Step 2: Make space (shift 7 and 9)                   â”‚
â”‚   Step 3: Insert 5                                     â”‚
â”‚                                                         â”‚
â”‚   Before: [1, 2, 7, 9]                                 â”‚
â”‚   After:  [1, 2, 5, 7, 9]                              â”‚
â”‚                                                         â”‚
â”‚   âš ï¸ Extra work! But databases are smart -             â”‚
â”‚      They leave gaps for future inserts!               â”‚
â”‚                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ’¡ Different Database Terms

| Database | Term for Clustered Table |
|----------|--------------------------|
| MySQL InnoDB | Clustered Index |
| Oracle | IOT (Index Organized Table) |
| SQL Server | Clustered Index |
| PostgreSQL | No automatic clustering! |

---

## ğŸŒŸ Key Points (Remember!)

```
âœ… Heap = Unordered storage (insert order)
âœ… Clustering = Ordered storage (value order)
âœ… Primary Key = Usually means clustering
âœ… Clustering = Extra work on INSERT
âœ… PostgreSQL is different - no auto clustering!
```

---

## â¡ï¸ Next: [Primary Key and Clustered Index](./02_Primary_Key_Clustered_Index.md)
